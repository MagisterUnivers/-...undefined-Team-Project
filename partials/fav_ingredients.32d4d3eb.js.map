{"mappings":"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","sources":["src/js/fav_ingredients.js"],"sourcesContent":["import '../partials/components/switcher_theme_button/switcher_theme_button.ts';\nimport { LEARN_MORE_BTN, REMOVE_BTN } from './constants.js';\nimport { getIngredientData, modalIngredients } from './modal-ingredients';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\n\nconst favoritesList = document.querySelector('.fav-ingredients__list');\nconst favorites = JSON.parse(localStorage.getItem('favIngredients')) || [];\n\nfunction defaultAppearance() {\n  const defaultSection = document.querySelector('.fav-ingredients__default');\n  if (favorites.length) {\n    defaultSection.style.display = 'none';\n  } else {\n    defaultSection.style.display = 'block';\n  }\n}\n\nfunction renderFavoritesList() {\n  favoritesList.innerHTML = '';\n  for (const favorite of favorites) {\n    const strType = favorite.strType || favorite.strIngredient;\n    const li = document.createElement('li');\n    li.classList.add('fav-ingredients__item');\n    li.innerHTML = `<h3 class=\"fav-ingredient__name theme_text_color \">${favorite.strIngredient}</h3>\n    <h4 class=\"fav-ingredient__type\">${strType}</h4>\n    <div class=\"fav-ingredient__btn\">\n      ${LEARN_MORE_BTN}${REMOVE_BTN}\n    </div>`;\n    const removeBtn = li.querySelector('.btn-remove-from');\n    removeBtn.addEventListener('click', () => {\n      const index = favorites.findIndex(\n        fav =>\n          fav.strIngredient === favorite.strIngredient &&\n          fav.strType === favorite.strType\n      );\n      if (index > -1) {\n        favorites.splice(index, 1);\n        localStorage.setItem('favIngredients', JSON.stringify(favorites));\n        li.remove();\n        Notify.info(\n          `${favorite.strIngredient} was removed from your favoritesðŸ™„!  If you still see item, refresh page, and it will disappear`\n        );\n        defaultAppearance();\n        handleWrapper();\n      }\n    });\n    favoritesList.appendChild(li);\n  }\n\n  defaultAppearance();\n}\n\nfunction handleWrapper() {\n  const wrapper = document.querySelector('.fav-ingredients__wrapper');\n  if (favorites.length > 4) {\n    wrapper.style.display = 'none';\n  } else {\n    wrapper.style.display = 'block';\n  }\n}\n\nhandleWrapper();\n\nrenderFavoritesList();\n\nwindow.addEventListener('storage', event => {\n  if (event.key === 'favIngredients') {\n    renderFavoritesList();\n  }\n});\n\nconst headerForm = document.querySelector('.header-form');\nheaderForm.addEventListener('submit', onSubmitBtnClick);\n\nfunction onSubmitBtnClick(ev) {\n  ev.preventDefault();\n\n  const headerFormValue = headerForm.headerinput.value.toLowerCase();\n  console.log(headerFormValue);\n  const ingredientsRenderArr = favorites;\n\n  const collectedWordsArray = ingredientsRenderArr.map(ingredient => {\n    let ingredientName = ingredient.strIngredient.toLowerCase();\n\n    return ingredientName.split(' ');\n  });\n  console.log(headerFormValue.split(' '));\n\n  let ingredientsToParse = [];\n\n  collectedWordsArray.forEach((wordsArr, wordsArrIndex) => {\n    for (let word of wordsArr) {\n      if (headerFormValue.split(' ').includes(word)) {\n        ingredientsToParse.push(wordsArrIndex);\n      }\n    }\n  });\n\n  let ingredientsArr = [];\n\n  for (let ingredientIndex of ingredientsToParse) {\n    ingredientsArr.push(ingredientsRenderArr[ingredientIndex]);\n  }\n\n  document.querySelector('.fav-ingredients__list').innerHTML = '';\n\n  if (ingredientsArr.length === 0) {\n    document\n      .querySelector('.fav-ingredients__default')\n      .removeAttribute('hidden');\n    document.querySelector('.fav-ingredients__wrapper').style.display = 'block';\n    return;\n  } else {\n    document.querySelector('.fav-ingredients__wrapper').style.display = 'none';\n  }\n\n  const ingredientElementsArr = createElements(ingredientsArr);\n\n  handleWrapper();\n  document\n    .querySelector('.fav-ingredients__list')\n    .insertAdjacentHTML('beforeend', ingredientElementsArr.join(''));\n\n  const footer = document.querySelector('.footer');\n  footer.style.position = 'absolute';\n  footer.style.bottom = '0';\n  footer.style.width = '100%';\n}\n\nasync function createElements(ingredientsArr) {\n  const elementsArr = ingredientsArr.map(ingredient => {\n    const strType = ingredient.strType || ingredient.strIngredient;\n    const li = `<li class=\"fav-ingredients__item\">\n      <h3 class=\"fav-ingredient__name\">${ingredient.strIngredient}</h3>\n      <h4 class=\"fav-ingredient__type\">${strType}</h4>\n      <div class=\"fav-ingredient__btn\">\n        ${LEARN_MORE_BTN}${REMOVE_BTN}\n      </div>\n    </li>`;\n    return li;\n  });\n  return elementsArr;\n}\n\ndocument.querySelectorAll('.btn-learn-more').forEach(button => {\n  button.addEventListener('click', e => {\n    const ingredientName = e.target\n      .closest('.fav-ingredients__item')\n      .querySelector('.fav-ingredient__name').textContent;\n    getIngredientData(ingredientName);\n    document.querySelector('body').classList.add('no-scroll');\n\n    modalIngredients.classList.toggle('is-hidden');\n  });\n});\n\ndocument\n  .querySelector('.modal-ingredients-close')\n  .addEventListener('click', () => {\n    document.querySelector('body').classList.remove('no-scroll');\n  });\n"],"names":["$bpxeT","parcelRequire","$0d59621c972f164e$var$favoritesList","document","querySelector","$0d59621c972f164e$var$favorites","JSON","parse","localStorage","getItem","$0d59621c972f164e$var$defaultAppearance","defaultSection","length","style","display","$0d59621c972f164e$var$renderFavoritesList","innerHTML","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step1","favorite","_step","value","strType","strIngredient","li","createElement","classList","add","concat","$4s6iC","LEARN_MORE_BTN","REMOVE_BTN","addEventListener","index","findIndex","fav","splice","setItem","stringify","remove","$h6c0i","Notify","info","$0d59621c972f164e$var$handleWrapper","appendChild","_iterator","Symbol","iterator","next","done","_loop","err","return","wrapper","window","event","key","$0d59621c972f164e$var$headerForm","$0d59621c972f164e$var$_createElements","$parcel$interopDefault","$2TvXO","mark","_callee","ingredientsArr","elementsArr","map","ingredient","apply","this","arguments","ev","preventDefault","headerFormValue","headerinput","toLowerCase","console","log","ingredientsRenderArr","collectedWordsArray","split","ingredientsToParse","forEach","wordsArr","wordsArrIndex","word","includes","push","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_iterator1","ingredientIndex","removeAttribute","ingredientElementsArr","$0d59621c972f164e$var$createElements","insertAdjacentHTML","join","footer","position","bottom","width","querySelectorAll","button","e","ingredientName","target","closest","textContent","$6alNL","getIngredientData","modalIngredients","toggle"],"version":3,"file":"fav_ingredients.32d4d3eb.js.map"}